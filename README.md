# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Описание данных
```TypeScript
//типы категорий товаров
export type ICategory = 'другое' | 'софт-скил' | 'дополнительное' | 'кнопка' | 'хард-скил';

//интерфейс карточки товара
export interface ICard {
    //id с сервера
    id: string;
    //категория товара - используется на главной странице Page и при просмотре карточки
    category: ICategory;
    //наименование товара - используется на главной странице Page, при просмотре карточки и в корзине
    name: string;
    //описание товара - используется на при просмотре карточки
    description: string;
    //картинка товара - используется на главной странице Page и при просмотре карточки
    image: string;
    //ценв товара - используется на главной странице Page, при просмотре карточки и в корзине
    price: number | null;
    //находится ли товар в корзине
    selected: boolean;
}

//галерея товаров (список всех карточек с главной страницы)
export interface IGallery {
    cards: ICard[];
}

//состояние приложения
export interface IAppState {
    //список товаров
    catalog: IGallery;
    //корзина
    basket: string[];
    //заказ
    order: IOrder | null;
}

//способы оплаты
export type IPayment = 'Онлайн' | 'При получении';

//форма оформления заказа
export interface IOrderForm {
  //электронная почта
  email: string;
  //телефон
  phone: string;
  //адрес
  address: string;
  //способ оплаты
  payment: IPayment;
}

//заказ
export interface IOrder extends IOrderForm {
  //список товаров
  items: ICard[];
  //общая сумма заказа
  total: number;
}
```
## Модели данных
```TypeScript
//Класс, который отвечает за хранение данных
export class AppState implements IAppState {
	protected _count: number = 0;
	protected event: IEvents;

  //принимает в конструктор событие
	constructor(event: IEvents) {
		this.event = event;
	}

  //метод для получения массива товароы для стартовой страницы
  get gallery() {
    //возвращает массив карточек с сервера
  }

  //метод для добавления товара в корзину
	add() {
    //увеличивает значение счетчика корзины на 1
		this._count += 1;
    //запускает событие для изменения значения счетчика
    this.event.emit('count:changed')
    //добавляет в массив каточек корзины выбранную карточку
	}

  //метод для удаления товара из корзины
	remove() {
    //уменьшает значение счетчика корзины на 1
		this._count -= 1;
    //запускает событие для изменения значения счетчика
    this.event.emit('count:changed')
    //удаляет из массива каточек корзины выбранную карточку
	}

  //метод для получения значения счетчика корзины (кол-ва товаров)
	get count() {
		return this._count;
	}

  //метод для получения суммы заказа в корзине
	get totalPrice() {
    //возвращает сумму стоимостей всех добвленных товаров в массив корзины
	}

  //метод для добавления значений id товаров, email, phone, address, payment в заказ
	set dataBuyer() {
    //добавляет id товаров из корзины в заказ
    //добавляет данные пользователя из форм ввода в заказ
	}

  //метод для очистки корзины
	resetBasket() {
    //очищает массив карточек товаров в корзине после завершения заказа
    //сбрасывает на 0 сумму заказа
    //сбрасывает значение счетчика корзины на 0
	}

  //метод для очистки данных о пользователе в заказе
	resetOrder() {
    //очищает все поля заказа
	}
}
```
## Компоненты представления
```TypeScript
//Базовый компонент, имеет все базовые свойства и методы
export abstract class Component<T> {

}

//Класс для любых модальных окон, наследует Component
export class Modal extends Component<IModal> {
  //закрытие по оверфлоу
  //закрытие по крестику
}

//Главная страница, содержит каталог товаров, наследует Component
export class Page extends Component<IPage> {
  //при нажатии на карточку товара открывается модальное окно с детальной информацией о товаре;
  //при нажатии на иконку корзины, открывается корзина.
  //имеет метод updateCount для обновления счетчика корзины
  //имеет метод blocked для отмены прокрутки страницы
}

//Карточка товара, наследует Component
export class Card extends Component<ICard> {
  //имеет методы для получения и передачи атрибутов карточки товара (картинка, наименование, описание, стоимость, признак выбран ли товар)
}

//Представление для просмотра выбранного товара, наследует Modal
export class ViewProduct extends Modal<IViewProduct> {
  //при нажатии на сабмит добавляем в корзину значок +1 и меняем содержимое корзины и сумму покупки
  //бесценный товар купить нельзя. деактивируем кнопку
  //закрываем карточку товара
}

//Представление для просмотра корзины, наследует Modal
export class Basket extends Modal<IBasket> {
  //при нажатии на иконку корзины удаляем товар из корзины
  //при нажатии на сабмит закрываем форму и переключаемся на orderingFirst
  //имеет метод updateTotalPrice для обновления суммы заказа
  //имеет метод updateDataSet для обновления массива карточек
}

//Представление для оформления заказа №1, наследует Modal
export class OrderingFirst extends Modal<IOrderingFirst> {
  //при клике на один из вариатов способа оплаты, второй неактивен
  //при нажатии на сабмит закрываем форму и переключаемся на orderingSecond
}

//Представление для оформления заказа №2, наследует Modal
export class orderingSecond extends Modal<IorderingSecond> {
  //при нажатии на сабмит закрываем форму, очищаем заказ и переключаемся на Success
}

//Класс для валидации форм, наследует Component
export class FormValidator extends Component<IFormValidator> {
  //Кнопка перехода к следующему шагу становится доступна только после выполнения действий на текущей странице (выбора товара, способа оплаты, заполнения данных о покупателе)
  //если адрес доставки не введён, появляется сообщение об ошибке
  //если одно из полей не заполнено, появляется сообщение об ошибке
}

//Класс для оповещения об успешном оформлении заказа, наследует Modal
export class Success extends Modal<ISuccess> {
  
}
```
## Описание событий
```TypeScript
//Инициируется при добавлении в корзину (кнопка купить) или удалении товара из корзины (иконка корзины), изменяет список товаров в корзине
'items:changed'
//Инициируется при нажатии на карточку товара на главной странице и приводит к сохранению выбранной карточки
'card:select'
//Инициируется при изменении содержимого корзины и приводит к изменению счетчика товаров в корзине
'count:changed'
//Инициируется при изменении содержимого корзины и приводит к изменению суммы заказа
'totalPrice:changed'
//Инициируется при закрытии попапа "заказ оформлен" и приводит к удалению всех товаров из массива в корзине, обнулению суммы заказа и счетчика товаров в корзине, очистке всех полей заказа
'basket:delete'
//Инициируется при нажатии на кнопку "оформить" и сохраняет параметры заказа (id выбранных товаров, кол-во и стоимость)
'order:submit'
//Инициируется при нажатии на кнопку "далее" и сохраняет параметры заказа (способ оплаты и адрес доставки)
'address:submit'
//Инициируется при нажатии на кнопку "оплатить" и сохраняет параметры заказа (почта и телефон)
'contacts:submit'
//Инициируется при нажатии на кнопку "далее" и запускает валидацию параметров заказа (способ оплаты и адрес доставки)
'address:validation'
//Инициируется при нажатии на кнопку "оплатить" и запускает валидацию параметров заказа (почта и телефон)
'contacts:validation'
```

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```
